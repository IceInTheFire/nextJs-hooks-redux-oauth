{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nimport { useState, useEffect, useRef, useContext } from 'react';\nimport Link from 'next/link';\nimport Valid from \"../../../components/Valid\";\nimport { regExp } from \"../../../config\";\nvar loginNameReg = regExp.loginNameReg,\n    userPasReg = regExp.userPasReg;\nimport axios from \"../../../core/axios\";\nimport { host } from \"../../../config\";\nimport { hideLoading, showLoading } from \"../../../core/loading\";\nimport { message } from \"antd/lib/index\";\nimport { DataContext, LOGIN } from \"../../../store/data\";\nimport Router from \"next/router\";\n\nvar BisBox = function BisBox(props) {\n  var nameRef = useRef();\n  var pasRef = useRef();\n\n  var _useContext = useContext(DataContext),\n      data = _useContext.data,\n      dispatch = _useContext.dispatch;\n\n  var bisLogin =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var nameBool, pasBool, name, pas;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              nameBool = nameRef.current.check();\n              pasBool = pasRef.current.check();\n\n              if (!(!nameBool || !pasBool)) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              name = nameRef.current.getVal();\n              pas = pasRef.current.getVal(); // console.log(name);\n              // console.log(pas);\n\n              _context.next = 8;\n              return new _Promise(function (resolve, reject) {\n                showLoading();\n                var set = setTimeout(function () {\n                  message.success('登录成功');\n                  hideLoading();\n                  resolve({\n                    name: name\n                  });\n                  dispatch({\n                    type: LOGIN,\n                    token: 'asdasdasd',\n                    bis: {\n                      name: name\n                    }\n                  });\n                  Router.replace('/bis');\n                }, 5000);\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function bisLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    id: \"bisBox\"\n  }, React.createElement(Valid, {\n    className: 'login-input',\n    spanTitle: '登录名',\n    inputPlaceholder: '请输入手机号/用户名',\n    inputType: 'text',\n    inputMaxLength: \"15\",\n    regExp: loginNameReg,\n    nullMsg: '请输入手机号/用户名',\n    errorMsg: '请正确输入手机号和用户名',\n    ref: nameRef,\n    onEnter: bisLogin\n  }), React.createElement(Valid, {\n    className: 'login-input mb20',\n    spanTitle: '登录密码',\n    inputPlaceholder: '请输入登录密码',\n    inputType: 'password',\n    inputMaxLength: \"16\",\n    regExp: userPasReg,\n    nullMsg: '请输入登录密码',\n    errorMsg: '请正确输入密码',\n    ref: pasRef,\n    onEnter: bisLogin\n  }), React.createElement(\"div\", {\n    className: 'login-sign clearfix'\n  }, React.createElement(Link, {\n    href: {\n      pathname: '/Security/FindPassword',\n      query: {\n        type: 'bis'\n      }\n    }\n  }, React.createElement(\"a\", {\n    className: 'fr'\n  }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F\"))), React.createElement(\"div\", {\n    className: 'login-btn'\n  }, React.createElement(\"a\", {\n    onClick: bisLogin\n  }, \"\\u767B\\u5F55\")), React.createElement(\"div\", {\n    className: 'login-sign clearfix'\n  }, React.createElement(Link, {\n    href: {\n      pathname: '/regist',\n      query: {\n        type: 'bis'\n      }\n    }\n  }, React.createElement(\"a\", {\n    className: 'red fr'\n  }, \"\\u6CE8\\u518C\")), React.createElement(\"span\", {\n    className: 'fr mr5'\n  }, \"\\u6CA1\\u6709\\u8D26\\u53F7\\uFF1F\")));\n};\n\nexport default BisBox;","map":null,"metadata":{},"sourceType":"module"}