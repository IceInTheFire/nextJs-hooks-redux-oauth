{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React from \"react\";\nimport { useState, useEffect, useRef, forwardRef, useImperativeHandle } from 'react';\nimport \"./less/index.less\";\n\nvar valid = function valid(props, ref) {\n  var className = props.className,\n      spanClass = props.spanClass,\n      spanStyle = props.spanStyle,\n      spanTitle = props.spanTitle,\n      inputStyle = props.inputStyle,\n      inputPlaceholder = props.inputPlaceholder,\n      inputType = props.inputType,\n      inputMaxLength = props.inputMaxLength,\n      regExp = props.regExp,\n      nullMsg = props.nullMsg,\n      errorMsg = props.errorMsg,\n      onEnter = props.onEnter;\n  regExp = regExp || /\\*?/;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      val = _useState2[0],\n      setVal = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      valMsg = _useState4[0],\n      setValMsg = _useState4[1];\n\n  var onChange = function onChange(e) {\n    setVal(e.target.value);\n  };\n\n  var check = function check(e) {\n    if (!val) {\n      setValMsg(nullMsg);\n      return false;\n    } else if (!regExp.test(val)) {\n      setValMsg(errorMsg);\n      return false;\n    } else {\n      setValMsg(null);\n      return true;\n    }\n  };\n  /*\r\n  * 暴露给父组件使用的方法和参数\r\n  * */\n\n\n  useImperativeHandle(ref, function () {\n    return {\n      getVal: function getVal() {\n        return val;\n      },\n      check: check\n    };\n  });\n\n  var onBlur = function onBlur(e) {\n    check();\n  };\n\n  var onKeyDown = function onKeyDown(e) {\n    if (e.nativeEvent.keyCode == 13) {\n      onEnter();\n    }\n  };\n\n  var inputDom;\n\n  if (inputMaxLength) {\n    var _React$createElement;\n\n    inputDom = React.createElement(\"input\", (_React$createElement = {\n      className: valMsg ? 'Validform_error' : '',\n      style: {\n        'width': '321px'\n      }\n    }, _defineProperty(_React$createElement, \"style\", inputStyle), _defineProperty(_React$createElement, \"type\", inputType), _defineProperty(_React$createElement, \"placeholder\", inputPlaceholder), _defineProperty(_React$createElement, \"onBlur\", onBlur), _defineProperty(_React$createElement, \"onChange\", onChange), _defineProperty(_React$createElement, \"value\", val), _defineProperty(_React$createElement, \"maxLength\", inputMaxLength), _defineProperty(_React$createElement, \"onKeyDown\", onKeyDown), _React$createElement));\n  } else {\n    var _React$createElement2;\n\n    inputDom = React.createElement(\"input\", (_React$createElement2 = {\n      className: valMsg ? 'Validform_error' : '',\n      style: {\n        'width': '321px'\n      }\n    }, _defineProperty(_React$createElement2, \"style\", inputStyle), _defineProperty(_React$createElement2, \"type\", inputType), _defineProperty(_React$createElement2, \"placeholder\", inputPlaceholder), _defineProperty(_React$createElement2, \"onBlur\", onBlur), _defineProperty(_React$createElement2, \"onChange\", onChange), _defineProperty(_React$createElement2, \"value\", val), _defineProperty(_React$createElement2, \"onKeyDown\", onKeyDown), _React$createElement2));\n  }\n\n  return React.createElement(\"div\", {\n    className: className,\n    ref: ref\n  }, React.createElement(\"span\", {\n    className: spanClass,\n    style: spanStyle\n  }, spanTitle), inputDom, props.children, React.createElement(\"span\", {\n    className: valMsg ? 'Validform_wrong' : valMsg == null ? 'Validform_right' : ''\n  }, valMsg));\n};\n\nexport default forwardRef(valid);","map":null,"metadata":{},"sourceType":"module"}