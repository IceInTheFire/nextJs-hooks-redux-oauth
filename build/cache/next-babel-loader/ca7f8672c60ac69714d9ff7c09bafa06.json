{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useRef, forwardRef, useImperativeHandle } from 'react';\nimport \"./less/index.less\";\n\nvar valid = function valid(props, ref) {\n  var className = props.className,\n      spanClass = props.spanClass,\n      spanStyle = props.spanStyle,\n      spanTitle = props.spanTitle,\n      inputStyle = props.inputStyle,\n      inputPlaceholder = props.inputPlaceholder,\n      inputType = props.inputType,\n      inputMaxLength = props.inputMaxLength,\n      regExp = props.regExp,\n      nullMsg = props.nullMsg,\n      errorMsg = props.errorMsg,\n      onEnter = props.onEnter;\n  regExp = regExp || /\\*?/;\n\n  var _useState = useState(''),\n      val = _useState[0],\n      setVal = _useState[1];\n\n  var _useState2 = useState(''),\n      valMsg = _useState2[0],\n      setValMsg = _useState2[1];\n\n  var onChange = function onChange(e) {\n    setVal(e.target.value);\n  };\n\n  var check = function check(e) {\n    if (!val) {\n      setValMsg(nullMsg);\n      return false;\n    } else if (!regExp.test(val)) {\n      setValMsg(errorMsg);\n      return false;\n    } else {\n      setValMsg(null);\n      return true;\n    }\n  };\n  /*\r\n  * 暴露给父组件使用的方法和参数\r\n  * */\n\n\n  useImperativeHandle(ref, function () {\n    return {\n      getVal: function getVal() {\n        return val;\n      },\n      check: check\n    };\n  });\n\n  var onBlur = function onBlur(e) {\n    check();\n  };\n\n  var onKeyDown = function onKeyDown(e) {\n    if (e.nativeEvent.keyCode == 13) {\n      onEnter();\n    }\n  };\n\n  var inputDom;\n\n  if (inputMaxLength) {\n    var _jsx;\n\n    inputDom = __jsx(\"input\", (_jsx = {\n      className: valMsg ? 'Validform_error' : '',\n      style: {\n        'width': '321px'\n      }\n    }, _defineProperty(_jsx, \"style\", inputStyle), _defineProperty(_jsx, \"type\", inputType), _defineProperty(_jsx, \"placeholder\", inputPlaceholder), _defineProperty(_jsx, \"onBlur\", onBlur), _defineProperty(_jsx, \"onChange\", onChange), _defineProperty(_jsx, \"value\", val), _defineProperty(_jsx, \"maxLength\", inputMaxLength), _defineProperty(_jsx, \"onKeyDown\", onKeyDown), _jsx));\n  } else {\n    var _jsx2;\n\n    inputDom = __jsx(\"input\", (_jsx2 = {\n      className: valMsg ? 'Validform_error' : '',\n      style: {\n        'width': '321px'\n      }\n    }, _defineProperty(_jsx2, \"style\", inputStyle), _defineProperty(_jsx2, \"type\", inputType), _defineProperty(_jsx2, \"placeholder\", inputPlaceholder), _defineProperty(_jsx2, \"onBlur\", onBlur), _defineProperty(_jsx2, \"onChange\", onChange), _defineProperty(_jsx2, \"value\", val), _defineProperty(_jsx2, \"onKeyDown\", onKeyDown), _jsx2));\n  }\n\n  return __jsx(\"div\", {\n    className: className,\n    ref: ref\n  }, __jsx(\"span\", {\n    className: spanClass,\n    style: spanStyle\n  }, spanTitle), inputDom, props.children, __jsx(\"span\", {\n    className: valMsg ? 'Validform_wrong' : valMsg == null ? 'Validform_right' : ''\n  }, valMsg));\n};\n\nexport default forwardRef(valid);","map":null,"metadata":{},"sourceType":"module"}