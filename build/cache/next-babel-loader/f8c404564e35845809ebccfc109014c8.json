{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _message from \"antd/lib/message\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useRef, useContext } from 'react';\nimport Link from 'next/link';\nimport Valid from \"../../../components/Valid\";\nimport { regExp } from \"../../../config\";\nimport axios from \"../../../core/axios\";\nvar loginNameReg = regExp.loginNameReg,\n    userPasReg = regExp.userPasReg;\nimport { showLoading, hideLoading } from \"../../../core/loading\";\nimport 'antd/lib/message/style/index.less';\nimport Router from 'next/router';\nimport { DataContext, LOGIN } from \"../../../store/data\";\n\nvar UserBox = function UserBox(props) {\n  var nameRef = useRef();\n  var pasRef = useRef();\n\n  var _useContext = useContext(DataContext),\n      data = _useContext.data,\n      dispatch = _useContext.dispatch;\n\n  var userLogin =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var nameBool, pasBool, name, pas;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              nameBool = nameRef.current.check();\n              pasBool = pasRef.current.check();\n\n              if (!(!nameBool || !pasBool)) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              name = nameRef.current.getVal();\n              pas = pasRef.current.getVal();\n              console.log(name);\n              console.log(pas);\n              _context.next = 10;\n              return new _Promise(function (resolve, reject) {\n                showLoading();\n                var set = setTimeout(function () {\n                  _message.success('登录成功');\n\n                  hideLoading();\n                  resolve({\n                    name: name\n                  });\n                  dispatch({\n                    type: LOGIN,\n                    token: 'asdasdasd',\n                    user: {\n                      name: name\n                    }\n                  });\n                  Router.replace('/user');\n                }, 5000);\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function userLogin() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    id: \"userBox\"\n  }, __jsx(Valid, {\n    className: 'login-input',\n    spanTitle: '登录名',\n    inputPlaceholder: '请输入手机号/用户名',\n    inputType: 'text',\n    inputMaxLength: \"15\",\n    regExp: loginNameReg,\n    nullMsg: '请输入手机号/用户名',\n    errorMsg: '请正确输入手机号和用户名',\n    ref: nameRef,\n    onEnter: userLogin\n  }), __jsx(Valid, {\n    className: 'login-input mb20',\n    spanTitle: '登录密码',\n    inputPlaceholder: '请输入登录密码',\n    inputType: 'password',\n    inputMaxLength: \"16\",\n    regExp: userPasReg,\n    nullMsg: '请输入登录密码',\n    errorMsg: '请正确输入密码',\n    ref: pasRef,\n    onEnter: userLogin\n  }), __jsx(\"div\", {\n    className: 'login-sign clearfix'\n  }, __jsx(Link, {\n    href: {\n      pathname: '/Security/FindPassword',\n      query: {\n        type: 'user'\n      }\n    }\n  }, __jsx(\"a\", {\n    className: 'fr'\n  }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F\"))), __jsx(\"div\", {\n    className: 'login-btn'\n  }, __jsx(\"a\", {\n    onClick: userLogin\n  }, \"\\u767B\\u5F55\")), __jsx(\"div\", {\n    className: 'login-sign clearfix'\n  }, __jsx(Link, {\n    href: {\n      pathname: '/regist',\n      query: {\n        type: 'user'\n      }\n    },\n    replace: true\n  }, __jsx(\"a\", {\n    className: 'red fr'\n  }, \"\\u6CE8\\u518C\")), __jsx(\"span\", {\n    className: 'fr mr5'\n  }, \"\\u6CA1\\u6709\\u8D26\\u53F7\\uFF1F\")));\n};\n\nexport default UserBox;","map":null,"metadata":{},"sourceType":"module"}